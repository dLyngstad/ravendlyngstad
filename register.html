<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <title>Registrer | Raven D. Lyngstad</title>
  <style>
    /* ... (All din eksisterende, CSS er beholdt) ... */
    body{margin:0;font-family:'Inter','Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background-color:#fff;color:#333;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px;box-sizing:border-box}.container{background-color:#1a1a1a;padding:40px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,.4);width:100%;max-width:500px;text-align:center;position:relative;border:1px solid rgba(255,255,255,.08)}h1{color:#f0f0f0;margin-bottom:25px;font-size:2.4em;font-weight:700}p{line-height:1.6;margin-bottom:30px;color:#b0b0b0}form{display:flex;flex-direction:column;gap:20px;text-align:left}label{font-weight:600;color:#d0d0d0;margin-bottom:5px;display:block}input[type="text"],input[type="email"],input[type="tel"]{width:calc(100% - 20px);padding:12px 10px;border:1px solid #444;background-color:#3a3a3a;color:#f0f0f0;border-radius:8px;font-size:1em;transition:border-color .3s ease,box-shadow .3s ease;box-sizing:border-box}input[type="text"]:focus,input[type="email"]:focus,input[type="tel"]:focus{border-color:#6a5acd;box-shadow:0 0 0 3px rgba(106,90,205,.4);outline:none}button[type="submit"]{background-color:#fff;color:#0a0e01;padding:14px 25px;border:1px solid #6a5acd;border-radius:8px;font-size:1.1em;font-weight:600;cursor:pointer;transition:background-color .3s ease,color .3s ease,transform .2s ease;margin-top:15px;width:100%}button[type="submit"]:hover{background-color:#6a5acd;color:#fff;transform:translateY(-2px)}button[type="submit"]:active{transform:translateY(0)}#status{margin-top:25px;padding:15px;border-radius:8px;font-weight:600;transition:all .3s ease}#status.success{background-color:rgba(60,179,113,.2);color:#3cb371;border:1px solid #3cb371}#status.error{background-color:rgba(220,20,60,.2);color:#dc143c;border:1px solid #dc143c}.back-button-container{position:absolute;top:25px;left:25px}.back-button{display:inline-flex;align-items:center;background-color:#3a3a3a;color:#b0b0b0;padding:10px 15px;border-radius:8px;text-decoration:none;font-weight:500;transition:background-color .3s ease,color .3s ease;border:1px solid #444}.back-button:hover{background-color:#4a4a4a;color:#f0f0f0}.back-button::before{content:'←';margin-right:8px;font-size:1.1em}
  </style>
</head>
<body>
  <div class="container">
    <div class="back-button-container">
      <a href="index.html" class="back-button">Tilbake</a>
    </div>

    <h1>Registrer maleri</h1>
    <p>Fyll inn ID-koden fra baksiden av maleriet og din kontaktinformasjon for å registrere deg som eier.</p>

    <form id="painting-form">
      <label for="painting-id">ID på maleriet: *</label>
      <input type="text" id="painting-id" required>

      <label for="owner-name">Ditt navn: *</label>
      <input type="text" id="owner-name" required>

      <label for="owner-email">Din e-post: *</label>
      <input type="email" id="owner-email" required>

      <label for="owner-phone">Ditt telefonnummer (Hvis ønskelig):</label>
      <input type="tel" id="owner-phone">

      <button type="submit">Send registrering</button>
    </form>
    <div id="status"></div>
  </div>

  <script>
    document.getElementById('painting-form').addEventListener('submit', async function(e) {
      e.preventDefault();

      const statusDiv = document.getElementById("status");
      const paintingId = document.getElementById("painting-id").value;
      const ownerName = document.getElementById("owner-name").value;
      const ownerEmail = document.getElementById("owner-email").value;
      const ownerPhone = document.getElementById("owner-phone").value;
      
      const API_URL = 'https://forum.dlprodukter.com/api/paintings/register';

      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            // KORRIGERING HER: Nøklene matcher nå det back-end forventer
            paintingId: paintingId,
            name: ownerName,
            email: ownerEmail,
            phone: ownerPhone
          })
        });

        const result = await response.json();

        if (!response.ok) {
          throw new Error(result.message || 'Noe gikk galt på serveren.');
        }
        
        statusDiv.textContent = "Takk! Din registrering er mottatt.";
        statusDiv.className = 'success';
        document.getElementById("painting-form").reset();

      } catch (error) {
        statusDiv.textContent = `Feil: ${error.message}`;
        statusDiv.className = 'error';
        console.error(error);
      }
    });
  </script>
</body>
</html>

